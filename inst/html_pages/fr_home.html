<div class="home-section">
    <h1 class="home-section-title"><a href="https://linkr.interhop.org/docs/" target=_blank">Documentation</a></h1>
    <div class="home-widget-container" data-section="documentation">
        <button class="home-nav-button prev hidden" onclick="scrollContainer(this, 'left')">
            <i class="fas fa-chevron-left"></i>
        </button>
        <button class="home-nav-button next hidden" onclick="scrollContainer(this, 'right')">
            <i class="fas fa-chevron-right"></i>
        </button>
        <a href="https://linkr.interhop.org/docs/overview/" target="_blank" class="help-widget pink-widget">
            <div class="help-widget-icon pink-widget-icon">
                <i class="fas fa-tools"></i>
            </div>
            <div class="help-widget-content">
                <h3>Mise en place</h3>
                <p>Démarrez rapidement avec votre premier projet</p>
            </div>
        </a>
        
        <a href="https://linkr.interhop.org/docs/components/" target="_blank" class="help-widget purple-widget">
            <div class="help-widget-icon purple-widget-icon">
                <i class="fas fa-puzzle-piece"></i>
            </div>
            <div class="help-widget-content">
                <h3>Composants</h3>
                <p>Découvrez les éléments essentiels de LinkR</p>
            </div>
        </a>
    
        <a href="https://linkr.interhop.org/docs/import_data/" target="_blank" class="help-widget green-widget">
            <div class="help-widget-icon green-widget-icon">
                <i class="fas fa-database"></i>
            </div>
            <div class="help-widget-content">
                <h3>Importer des données</h3>
                <p>Import depuis bases de données, Parquet et CSV</p>
            </div>
        </a>
    
        <a href="https://linkr.interhop.org/docs/import_vocabularies/" target="_blank" class="help-widget yellow-widget">
            <div class="help-widget-icon yellow-widget-icon">
                <i class="fas fa-language"></i>
            </div>
            <div class="help-widget-content">
                <h3>Importer terminologies</h3>
                <p>Intégration des terminologies depuis Athena</p>
            </div>
        </a>
    
        <a href="https://linkr.interhop.org/docs/create_project/" target="_blank" class="help-widget blue-widget">
            <div class="help-widget-icon blue-widget-icon">
                <i class="fas fa-folder-plus"></i>
            </div>
            <div class="help-widget-content">
                <h3>Créer un projet</h3>
                <p>Initialisez et configurez votre espace de travail</p>
            </div>
        </a>
    
        <a href="https://linkr.interhop.org/docs/console/" target="_blank" class="help-widget gray-widget">
            <div class="help-widget-icon gray-widget-icon">
                <i class="fas fa-terminal"></i>
            </div>
            <div class="help-widget-content">
                <h3>Console</h3>
                <p>Accédez aux consoles R et Python intégrées</p>
            </div>
        </a>
    
        <a href="https://linkr.interhop.org/docs/create_subset/" target="_blank" class="help-widget orange-widget">
            <div class="help-widget-icon orange-widget-icon">
                <i class="fas fa-layer-group"></i>
            </div>
            <div class="help-widget-content">
                <h3>Créer un subset</h3>
                <p>Explorez des sous-ensembles de données</p>
            </div>
        </a>
    
        <a href="https://linkr.interhop.org/docs/create_data_cleaning_script/" target="_blank" class="help-widget red-widget">
            <div class="help-widget-icon red-widget-icon">
                <i class="fas fa-broom"></i>
            </div>
            <div class="help-widget-content">
                <h3>Script de data cleaning</h3>
                <p>Nettoyez et améliorez la qualité des données</p>
            </div>
        </a>
    
        <a href="https://linkr.interhop.org/docs/create_plugin/" target="_blank" class="help-widget purple-widget">
            <div class="help-widget-icon purple-widget-icon">
                <i class="fas fa-plug"></i>
            </div>
            <div class="help-widget-content">
                <h3>Plugins</h3>
                <p>Étendez les fonctionnalités de LinkR</p>
            </div>
        </a>
    
        <a href="https://linkr.interhop.org/docs/explore/" target="_blank" class="help-widget cyan-widget">
            <div class="help-widget-icon cyan-widget-icon">
                <i class="fas fa-book"></i>
            </div>
            <div class="help-widget-content">
                <h3>Catalogue de contenus</h3>
                <p>Explorez le contenu partagé par la communauté</p>
            </div>
        </a>
    
        <a href="https://linkr.interhop.org/docs/share/" target="_blank" class="help-widget rose-widget">
            <div class="help-widget-icon rose-widget-icon">
                <i class="fas fa-share-alt"></i>
            </div>
            <div class="help-widget-content">
                <h3>Partager</h3>
                <p>Contribuez à l'open science en partageant vos travaux</p>
            </div>
        </a>
    </div>
</div>

<div class="home-section">
    <h1 class="home-section-title"><a href="https://linkr.interhop.org/blog/" target="_blank">Articles</a></h1>
    <div class="home-widget-container" data-section="articles">
        <button class="home-nav-button prev hidden" onclick="scrollContainer(this, 'left')">
            <i class="fas fa-chevron-left"></i>
        </button>
        <button class="home-nav-button next hidden" onclick="scrollContainer(this, 'right')">
            <i class="fas fa-chevron-right"></i>
        </button>
        <a href="https://linkr.interhop.org/blog/2024/09/02/requ%C3%AAtes-usuelles-v5.4/" target="_blank" class="help-widget purple-widget">
            <div class="help-widget-icon purple-widget-icon">
                <i class="fas fa-file-code"></i>
            </div>
            <div class="help-widget-content">
                <h3>OMOP - requêtes v5.4</h3>
                <p>Requêtes et utilisation du modèle OMOP v5.4</p>
            </div>
        </a>
    </div>
</div>

<script>
    function scrollContainer(button, direction) {
        const section = button.closest('.home-section');
        const container = section.querySelector('.home-widget-container');
        const scrollAmount = 300;
        if (direction === 'left') {
            container.scrollLeft -= scrollAmount;
        } else {
            container.scrollLeft += scrollAmount;
        }
        updateNavButtons(section);
    }

    function updateNavButtons(section) {
        const container = section.querySelector('.home-widget-container');
        const prevButton = section.querySelector('.home-nav-button.prev');
        const nextButton = section.querySelector('.home-nav-button.next');
        
        if (!container || !prevButton || !nextButton) return;
        
        prevButton.classList.toggle('hidden', container.scrollLeft <= 0);
        const hasMoreContent = container.scrollWidth > container.clientWidth &&
            container.scrollLeft < container.scrollWidth - container.clientWidth;
        nextButton.classList.toggle('hidden', !hasMoreContent);
    }

    function initializeAllNavButtons() {
        const sections = document.querySelectorAll('.home-section');
        sections.forEach(section => {
            if (section) {
                const container = section.querySelector('.home-widget-container');
                if (container) {
                    container.scrollLeft = 0;
                    updateNavButtons(section);
                }
            }
        });
    }

    document.addEventListener('DOMContentLoaded', function() {
        initializeAllNavButtons();
        setupScrollListeners();
    });

    function setupScrollListeners() {
        const containers = document.querySelectorAll('.home-widget-container');
        containers.forEach(container => {
            if (container) {
                container.addEventListener('scroll', function() {
                    const section = container.closest('.home-section');
                    if (section) {
                        updateNavButtons(section);
                    }
                });
            }
        });
    }

    window.addEventListener('hashchange', function() {
        setTimeout(initializeAllNavButtons, 100);
    });

    $(document).on('shiny:value', function(event) {
        if (event.name.includes('home-')) {
            setTimeout(function() {
                initializeAllNavButtons();
                setupScrollListeners();
            }, 100);
        }
    });
</script>